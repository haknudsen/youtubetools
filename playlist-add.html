<!doctype html>
<html>
<head>
<title>Create a Playlist</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="my_uploads.css">
</head>
<body>
<section class="jumbotron">
  <div class="container text-center">
    <h1>Create a Playlist</h1>
<<<<<<< HEAD
    <div id="login-container" class="pre-auth">This application requires access to your YouTube account.
      Please <a href="#" id="login-link">authorize</a> to continue. </div>
    <div id="buttons" class="m-1">
      <label class="m-1">Playlist Name:
        <input id="playlist-name" type="text"/>
      </label>
      <br>
      <label class="m-1">Playlist Description: </label>
      <textarea id="playlist-description-new"></textarea>
      <br>
      <button id="playlist-button" disabled onclick="createPlaylist()">Create a new Playlist</button>
      <br>
      <hr>
      <label class="m-1">Current Playlist Id:
        <input id="playlist-id" type="text"/>
      </label>
      <br>
      <label class="m-1">Video Id:
        <textarea id="video-id"></textarea>
      </label>
      <br>
      <button class="m-1" onclick="addVideoToPlaylist()">Add to current playlist</button>
    </div>
    <h3 class="m-1">Playlist: <span id="playlist-title"></span></h3>
    <p id="playlist-description"></p>
    <div id="playlist-container"> <span id="status">No Videos</span> </div>
  </div>
</section>
<footer id="footer"></footer>
<script src="auth.js"></script> 
<script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script> 
<script src="playlist-code.js"></script>
<script>
    $(document).ready(function(){
        $("#footer").load("includes/footer.html")
    });
</script>
=======
    <button id="execute-request-button">Authorize</button>
    <label class="m-1">Current Playlist Id:
      <input id="playlist-id" type="text"/>
    </label>
    <br>
    <label class="m-1">Video Id:
      <textarea id="video-id"></textarea>
    </label>
    <br>
    <button class="m-1" onclick="addVideoToPlaylist()">Add to current playlist</button>
  </div>
  <h3 class="m-1">Playlist: <span id="playlist-title"></span></h3>
  <p id="playlist-description"></p>
  <div id="playlist-container"> <span id="status">No Videos</span> </div>
</section>
<footer id="footer"></footer>
<script>
/***** START BOILERPLATE CODE: Load client library, authorize user. *****/
// Global variables for GoogleAuth object, auth status.
var GoogleAuth;
/**
 * Load the API's client and auth2 modules.
 * Call the initClient function after the modules load.
 */
function handleClientLoad() {
	gapi.load('client:auth2', initClient);
}

function initClient() {
	// Initialize the gapi.client object, which app uses to make API requests.
	// Get API key and client ID from API Console.
	// 'scope' field specifies space-delimited list of access scopes
	gapi.client.init({
		'clientId': '90875073625-ff3ntj9kehegnbamaoace12q6lo37v6u.apps.googleusercontent.com',
		'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest'],
		'scope': 'https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner'
	}).then(function() {
		GoogleAuth = gapi.auth2.getAuthInstance();
		// Listen for sign-in state changes.
		GoogleAuth.isSignedIn.listen(updateSigninStatus);
		// Handle initial sign-in state. (Determine if user is already signed in.)
		setSigninStatus();
		// Call handleAuthClick function when user clicks on "Authorize" button.
		$('#execute-request-button').click(function() {
			handleAuthClick(event);
		});
	});
}

function handleAuthClick(event) {
	// Sign user in after click on auth button.
	GoogleAuth.signIn();
}

function setSigninStatus() {
	var user = GoogleAuth.currentUser.get();
	isAuthorized = user.hasGrantedScopes('https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtubepartner');
	// Toggle button text and displayed statement based on current auth status.
	if (isAuthorized) {
		console.log('authorized');
	}
}

function updateSigninStatus(isSignedIn) {
	setSigninStatus();
}

function createResource(properties) {
	var resource = {};
	var normalizedProps = properties;
	for (var p in properties) {
		var value = properties[p];
		if (p && p.substr(-2, 2) == '[]') {
			var adjustedName = p.replace('[]', '');
			if (value) {
				normalizedProps[adjustedName] = value.split(',');
			}
			delete normalizedProps[p];
		}
	}
	for (var p in normalizedProps) {
		// Leave properties that don't have values out of inserted resource.
		if (normalizedProps.hasOwnProperty(p) && normalizedProps[p]) {
			var propArray = p.split('.');
			var ref = resource;
			for (var pa = 0; pa < propArray.length; pa++) {
				var key = propArray[pa];
				if (pa == propArray.length - 1) {
					ref[key] = normalizedProps[p];
				} else {
					ref = ref[key] = ref[key] || {};
				}
			}
		};
	}
	return resource;
}

function removeEmptyParams(params) {
	for (var p in params) {
		if (!params[p] || params[p] == 'undefined') {
			delete params[p];
		}
	}
	return params;
}

function executeRequest(request) {
	request.execute(function(response) {
		console.log(response);
	});
}

function buildApiRequest(requestMethod, path, params, properties) {
	params = removeEmptyParams(params);
	var request;
	if (properties) {
		var resource = createResource(properties);
		request = gapi.client.request({
			'body': resource,
			'method': requestMethod,
			'path': path,
			'params': params
		});
	} else {
		request = gapi.client.request({
			'method': requestMethod,
			'path': path,
			'params': params
		});
	}
	executeRequest(request);
}

function addVideoToPlaylist() {
	addToPlaylist($('#video-id').val());
}

function addToPlaylist(id) {
	var list = id.split("|");
	for (var i = 0; i < list.length; i++) {
		buildApiRequest('POST', '/youtube/v3/playlistItems', {
			'part': 'snippet',
			'onBehalfOfContentOwner': ''
		}, {
			'snippet.playlistId': $('#playlist-id').val(),
			'snippet.resourceId.kind': 'youtube#video',
			'snippet.resourceId.videoId': list[i],
			'snippet.position': ''
		});
	}
} 
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" ></script>
    <script async defer src = "https://apis.google.com/js/api.js"
        onload = "this.onload=function(){};handleClientLoad()"
        onreadystatechange = "if (this.readyState === 'complete') this.onload()" >
        </script>
>>>>>>> youtubetools/master
</body>
</html>